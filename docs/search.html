---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "00_search.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_search.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="index_data" class="doc_header"><code>index_data</code><a href="https://github.com/omemaxim/doc_collection/tree/master/doc_collection/search.py#L11" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>index_data</code>(<strong><code>d</code></strong>, <strong><code>es</code></strong>, <strong><code>model</code></strong>, <strong><code>INDEX_NAME</code></strong>=<em><code>'my_index_name'</code></em>, <strong><code>BATCH_SIZE</code></strong>=<em><code>5000</code></em>)</p>
</blockquote>
<p>indexes data</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="index_batch" class="doc_header"><code>index_batch</code><a href="https://github.com/omemaxim/doc_collection/tree/master/doc_collection/search.py#L70" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>index_batch</code>(<strong><code>docs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="embed_text" class="doc_header"><code>embed_text</code><a href="https://github.com/omemaxim/doc_collection/tree/master/doc_collection/search.py#L83" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>embed_text</code>(<strong><code>text</code></strong>, <strong><code>model</code></strong>)</p>
</blockquote>
<p>embedds text</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="query" class="doc_header"><code>query</code><a href="https://github.com/omemaxim/doc_collection/tree/master/doc_collection/search.py#L92" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>query</code>(<strong><code>text</code></strong>, <strong><code>size</code></strong>, <strong><code>es</code></strong>, <strong><code>model</code></strong>, <strong><code>INDEX_NAME</code></strong>=<em><code>'my_index_name'</code></em>, <strong><code>field</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Elasticsearch query function</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ELASTIC_PASSWORD</span> <span class="o">=</span> <span class="s2">&quot;bzF2z8iSu8bcSJR5SL3xM795&quot;</span>

<span class="n">CLOUD_ID</span> <span class="o">=</span> <span class="s2">&quot;Johan:dXMtZWFzdC0yLmF3cy5lbGFzdGljLWNsb3VkLmNvbTo0NDMkMjk5NWZiZjRjYTZkNGZlN2I2NmJhZDlhMzIxMmM5OGUkMWJhMjBlNzY3MDEyNDdmNjgxMDQ4ZGZmZDZjZDg0OTc=&quot;</span>

<span class="n">es</span> <span class="o">=</span> <span class="n">Elasticsearch</span><span class="p">(</span>
    <span class="n">cloud_id</span><span class="o">=</span><span class="n">CLOUD_ID</span><span class="p">,</span>
    <span class="n">http_auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;elastic&quot;</span><span class="p">,</span> <span class="n">ELASTIC_PASSWORD</span><span class="p">)</span>
<span class="p">)</span>


<span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;sentence-transformers/all-mpnet-base-v2&#39;</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">SentenceTransformer</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">query</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;How to drop a column in pandas?&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">es</span><span class="o">=</span><span class="n">es</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">INDEX_NAME</span><span class="o">=</span><span class="s1">&#39;bert&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[&#39;pandas.DataFrame.drop&#39;, &#39;pandas.Series.drop&#39;, &#39;pandas.DataFrame.dropna&#39;, &#39;pyarrow.Table.drop&#39;, &#39;pandas.DataFrame.droplevel&#39;, &#39;pandas.Index.dropna&#39;, &#39;pandas.Series.droplevel&#39;, &#39;pandas.Series.dropna&#39;, &#39;pyarrow.Table.remove_column&#39;, &#39;pandas.MultiIndex.dropna&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">query</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;How to drop a column in pandas?&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">es</span><span class="o">=</span><span class="n">es</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">INDEX_NAME</span><span class="o">=</span><span class="s1">&#39;bert&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>pandas.DataFrame.drop. function drop in module pandas.core.frame

ddrroopp(self, labels=None, axis: &#39;Axis&#39; = 0, index=None, columns=None, level: &#39;Level | None&#39; = None, inplace: &#39;bool&#39; = False, errors: &#39;str&#39; = &#39;raise&#39;)
    Drop specified labels from rows or columns.
    
    Remove rows or columns by specifying label names and corresponding
    axis, or by specifying directly index or column names. When using a
    multi-index, labels on different levels can be removed by specifying
    the level. See the `user guide &lt;advanced.shown_levels&gt;`
    for more information about the now unused levels.
    
    Parameters
    ----------
    labels : single label or list-like
        Index or column labels to drop. A tuple will be used as a single
        label and not treated as a list-like.
    axis : {0 or &#39;index&#39;, 1 or &#39;columns&#39;}, default 0
        Whether to drop labels from the index (0 or &#39;index&#39;) or
        columns (1 or &#39;columns&#39;).
    index : single label or list-like
        Alternative to specifying axis (``labels, axis=0``
        is equivalent to ``index=labels``).
    columns : single label or list-like
        Alternative to specifying axis (``labels, axis=1``
        is equivalent to ``columns=labels``).
    level : int or level name, optional
        For MultiIndex, level from which the labels will be removed.
    inplace : bool, default False
        If False, return a copy. Otherwise, do operation
        inplace and return None.
    errors : {&#39;ignore&#39;, &#39;raise&#39;}, default &#39;raise&#39;
        If &#39;ignore&#39;, suppress error and only existing labels are
        dropped.
    
    Returns
    -------
    DataFrame or None
        DataFrame without the removed index or column labels or
        None if ``inplace=True``.
    
    Raises
    ------
    KeyError
        If any of the labels is not found in the selected axis.
    
    See Also
    --------
    DataFrame.loc : Label-location based indexer for selection by label.
    DataFrame.dropna : Return DataFrame with labels on given axis omitted
        where (all or any) data are missing.
    DataFrame.drop_duplicates : Return DataFrame with duplicate rows
        removed, optionally only considering certain columns.
    Series.drop : Return Series with specified index labels removed.
    
    Examples
    --------
    &gt;&gt;&gt; df = pd.DataFrame(np.arange(12).reshape(3, 4),
    ...                   columns=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;])
    &gt;&gt;&gt; df
       A  B   C   D
    0  0  1   2   3
    1  4  5   6   7
    2  8  9  10  11
    
    Drop columns
    
    &gt;&gt;&gt; df.drop([&#39;B&#39;, &#39;C&#39;], axis=1)
       A   D
    0  0   3
    1  4   7
    2  8  11
    
    &gt;&gt;&gt; df.drop(columns=[&#39;B&#39;, &#39;C&#39;])
       A   D
    0  0   3
    1  4   7
    2  8  11
    
    Drop a row by index
    
    &gt;&gt;&gt; df.drop([0, 1])
       A  B   C   D
    2  8  9  10  11
    
    Drop columns and/or rows of MultiIndex DataFrame
    
    &gt;&gt;&gt; midx = pd.MultiIndex(levels=[[&#39;lama&#39;, &#39;cow&#39;, &#39;falcon&#39;],
    ...                              [&#39;speed&#39;, &#39;weight&#39;, &#39;length&#39;]],
    ...                      codes=[[0, 0, 0, 1, 1, 1, 2, 2, 2],
    ...                             [0, 1, 2, 0, 1, 2, 0, 1, 2]])
    &gt;&gt;&gt; df = pd.DataFrame(index=midx, columns=[&#39;big&#39;, &#39;small&#39;],
    ...                   data=[[45, 30], [200, 100], [1.5, 1], [30, 20],
    ...                         [250, 150], [1.5, 0.8], [320, 250],
    ...                         [1, 0.8], [0.3, 0.2]])
    &gt;&gt;&gt; df
                    big     small
    lama    speed   45.0    30.0
            weight  200.0   100.0
            length  1.5     1.0
    cow     speed   30.0    20.0
            weight  250.0   150.0
            length  1.5     0.8
    falcon  speed   320.0   250.0
            weight  1.0     0.8
            length  0.3     0.2
    
    Drop a specific index combination from the MultiIndex
    DataFrame, i.e., drop the combination ``&#39;falcon&#39;`` and
    ``&#39;weight&#39;``, which deletes only the corresponding row
    
    &gt;&gt;&gt; df.drop(index=(&#39;falcon&#39;, &#39;weight&#39;))
                    big     small
    lama    speed   45.0    30.0
            weight  200.0   100.0
            length  1.5     1.0
    cow     speed   30.0    20.0
            weight  250.0   150.0
            length  1.5     0.8
    falcon  speed   320.0   250.0
            length  0.3     0.2
    
    &gt;&gt;&gt; df.drop(index=&#39;cow&#39;, columns=&#39;small&#39;)
                    big
    lama    speed   45.0
            weight  200.0
            length  1.5
    falcon  speed   320.0
            weight  1.0
            length  0.3
    
    &gt;&gt;&gt; df.drop(index=&#39;length&#39;, level=1)
                    big     small
    lama    speed   45.0    30.0
            weight  200.0   100.0
    cow     speed   30.0    20.0
            weight  250.0   150.0
    falcon  speed   320.0   250.0
            weight  1.0     0.8

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>


